[build-system]
requires = ["hatchling", "hatch-vcs"]
build-backend = "hatchling.build"

[tool.hatch.metadata]
allow-direct-references = true

[project]
name = "lume-deploy"
dynamic = ["version"]
description = "A package for deploying AI models and more using lume inspired interfaces"
authors = [
    {"name" = "Mateusz Leputa"},
    {"name" = "Kathryn Baker"},
    {"name" = "Jesse Bellister"},
]
dependencies = [
    "botorch>=0.12.0",
    "tensorflow>=2.3.1",
#    "lume-model@git+https://github.com/slaclab/lume-model.git@2921e6583a6cfd49285833eb851b361aacf65b4c",
    "pandas>=2.0.1",
    "numpy<2.0",
    "keras>=3.1.1",
    "mlflow>=2.12.1",
    "boto3>=1.34.65",
    "psycopg2-binary",
    "k2eg>=0.2.7",
    "psutil>=6.0.0",
    "colorlog>=6.8.2",
    "p4p",
    "pyepics",
    "argparse>=1.4.0",
]

[tool.hatch.version]
source = "vcs"

[tool.hatch.build.hooks.vcs]
version-file = "_version.py"

[tool.hatch.build.targets.wheel]
packages = ["model_manager"]
only-packages = true

[tool.ruff.format]
preview = true
quote-style = "single"

[project.scripts]
model_manager = "model_manager.scripts.main:main"

[tool.hatch.envs.default.env-vars]
PYTHONPATH = "model_manager/src"

[tool.hatch.envs.default.scripts]
test = "pytest"

[tool.hatch.version.raw-options]
local_scheme = "no-local-version"